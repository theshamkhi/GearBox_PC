















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































// les lignes JS : oumayma 
// recupere id de image de prod Numero 1
var img_prod_first = document.getElementById('img_prod_first');
var Full_image=document.getElementById('Full_image');
var Prix=document.getElementById('Prix');
var prix_promotion=document.getElementById('prix_promotion');
var name_product=document.getElementById('name_product');
var description_product=document.getElementById('description_product');
var prod_zome_1=document.getElementById('prod_zome_1');
var prod_zome_2=document.getElementById('prod_zome_2');
var prod_zome_3=document.getElementById('prod_zome_3');
var prod_zome_4=document.getElementById('prod_zome_4');
var img_prod_second=document.getElementById('img_prod_second');
var img_prod_third=document.getElementById('img_prod_third');
var img_prod_for=document.getElementById('img_prod_for');
//div pour description sur Product
var product_description=document.getElementById('product_description'); 

// Fonction pour obtenir le paramètre de l'URL
function getURLParameter(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
}

function fetchDataAndDisplay() {
    const urlId = getURLParameter('id');
    console.log(urlId);

    if (!urlId) {
        console.log("Aucun ID dans l'URL, nouvelle vérification dans une seconde.");
        return;
    }

    fetch('../data/data.json')
    .then(response => {
        if (!response.ok) {
            throw new Error("Erreur de chargement du fichier data.json");
        }
        return response.json();
    })
    .then(data => {
        data.forEach((item) => {
            if (item.id == urlId) {
                img_prod_first.src = item.image_urls[2];
                Full_image.src = item.image_urls[0];
                Prix.innerHTML = ` MAD ${item.price} `;

                // Calculer le prix promotionnel
                let calul_prix_promotion = ((item.price) - item.price * 0.39).toFixed(2);
                prix_promotion.innerHTML = ` MAD ${calul_prix_promotion}`;
                name_product.innerHTML = item.name;
                description_product.innerHTML = item.short_description;

                // Images de zoom
                prod_zome_1.src = item.image_urls[0];
                prod_zome_2.src = item.image_urls[2];
                prod_zome_3.src = item.image_urls[0];
                prod_zome_4.src = item.image_urls[2];

                // Images latérales
                img_prod_second.src = item.image_urls[0];
                img_prod_third.src = item.image_urls[2];
                img_prod_for.src = item.image_urls[0];

                // Créer un conteneur pour aligner les descriptions horizontalement
                let descriptionRow = document.createElement('div');
                descriptionRow.className = 'flex flex-wrap gap-4 mb-4'; // Aligne chaque ligne de description en ligne, avec un espace entre les groupes

                // Fonction pour styliser et ajouter chaque description sous forme de carte
                function addDescriptionElement(key, label) {
                    if (item[key]) {
                        let element = document.createElement('div');
                        element.className = 'bg-gray-100 p-4 rounded-lg shadow-md w-48 text-gray-700'; // Classe w-48 pour taille fixe de chaque carte
                        element.innerHTML = `<p class="font-semibold text-gray-800">${label}:</p> <p>${item[key]}</p>`;
                        descriptionRow.appendChild(element);
                    }
                }

                // Ajouter toutes les descriptions pour un produit dans la ligne `descriptionRow`
                
                // addDescriptionElement("part_type", "Type de pièce");
                // addDescriptionElement("Socket", "Socket");
                // addDescriptionElement("GPU Model", "Modèle GPU");
                // addDescriptionElement("Memory", "Mémoire");
                // addDescriptionElement("Capacity", "Capacité");
                // addDescriptionElement("Interface", "Interface");
                // addDescriptionElement("Speed", "Vitesse");
                // addDescriptionElement("Voltage", "Voltage");
                // addDescriptionElement("Latency", "Latence");

                function toggleModal() {
                    const modal = document.getElementById("descriptionModal");
                    modal.classList.toggle("hidden");
                }
            
                // Function to add description elements
                function addDescriptionElement(key, value) {
                    const contentDiv = document.getElementById("descriptionContent");
                    const descriptionElement = document.createElement("p");
                    descriptionElement.classList.add("text-gray-700");
                    descriptionElement.innerHTML = `<strong>${key}:</strong> ${value}`;
                    contentDiv.appendChild(descriptionElement);
                }
            
                // Adding the elements to the modal
                addDescriptionElement("part_type", "Type de pièce");
                addDescriptionElement("Socket", "Socket");
                addDescriptionElement("GPU Model", "Modèle GPU");
                addDescriptionElement("Memory", "Mémoire");
                addDescriptionElement("Capacity", "Capacité");
                addDescriptionElement("Interface", "Interface");
                addDescriptionElement("Speed", "Vitesse");
                addDescriptionElement("Voltage", "Voltage");
                addDescriptionElement("Latency", "Latence");

                // Ajouter la ligne complète des descriptions au conteneur principal
                product_description.appendChild(descriptionRow);
            }
        });
    })
    .catch(error => console.log("Erreur:", error));
}

// Appel de la fonction pour charger les données au démarrage
// fetchDataAndDisplay();


// 


// 


// Set up a repeating check every second
const checkInterval = setInterval(() => {
    const urlId = getURLParameter('id');

    if (urlId) {
        clearInterval(checkInterval);  // Stop checking once ID is found
        fetchDataAndDisplay();         // Fetch data and display content
    } else {
        console.log("Vérification de l'ID chaque seconde...");
    }
}, 1000);  // Check every 1000ms (1 second)

































