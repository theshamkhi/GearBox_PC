<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalogue</title>
    <link rel="icon" href="../assets/media/Logo.png"/>
    <meta name="description" content="GearBox PC est un magasin en ligne spécialisé dans les composants PC de haute qualité, fournissant tout ce dont vous avez besoin pour construire, mettre à niveau et optimiser votre ordinateur.">
    <meta name="keywords" content="Pc Parts, Monitor, Gaming Pc">
    <meta name="author" content="CloudBlast">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/GearBox.css">
    <link href="../src/output.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

    <!-- Navbar -->
    <nav class="bg-white lg:px-32 shadow p-4 flex justify-between items-center sticky top-0 left-0 w-full z-50">
        <button class="text-2xl" onclick="toggleMenu()">&#9776;</button>
        <img src="../assets/media/Logo.png" alt="Logo" class="w-56 sm:w-48 md:w-64 lg:w-72 h-auto">
        <div class="relative flex items-center space-x-6">
            <!-- Cart Icon == Trigger -->
            <button id="cart-button" class="text-2xl text-white" title="Panier" onclick="toggleCart()">&#128722;</button>
            <button class="text-2xl text-white" title="Login">
                <svg xmlns="http://www.w3.org/2000/svg" fill="black" viewBox="0 0 24 24" width="24" height="24">
                    <path d="M12 12c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm0 2c-3.33 0-10 1.68-10 5v3h20v-3c0-3.32-6.67-5-10-5z"/>
                </svg>
            </button>
            <!-- Cart Sidebar (right) -->
            <div id="CartBar" style="top:74px;" class="fixed right-0 w-96 h-screen overflow-y-auto bg-white shadow-lg p-4 z-50 transform translate-x-full transition-transform duration-300">
                <a href="Panier.html" class="text-lg font-semibold mb-4 border-b pb-2 hover:text-blue-800 cursor-pointer">Votre Panier</a>                                    
                <!-- Product List -->
                <div class="CartSidebarDiv space-y-4 mt-4"></div>
            </div>
        </div>
    </nav>

    <!-- Sidebar (left) -->
    <div id="MenuSidebar" class="fixed top-0 left-0 w-64 h-full bg-white shadow-lg p-4 z-50 transform -translate-x-full transition-transform duration-300">
        <div class="flex justify-between items-center">
            <h3 class="text-lg font-semibold">Menu</h3>
            <!-- Close Button -->
            <button onclick="toggleMenu()" class="text-base font-normal" title="Close">&#10005;</button>
        </div>
        <ul class="space-y-4 mt-8">
            <li><a href="../index.html" class="block text-gray-800 font-semibold hover:text-blue-800">Accueil</a></li>
            <hr>
            <li><a href="Catalogue.html" class="block text-gray-800 font-semibold hover:text-blue-800">Catalogue</a></li>
            <hr>
            <li class="group relative">
                <a href="#" class="block text-gray-800 hover:text-blue-800">Carte mère</a>
            </li>
            <hr>            
            <li class="group relative">
                <a href="#" class="block text-gray-800 hover:text-blue-800">Processeur</a>
            </li>
            <hr>
            <li class="group relative">
                <a href="#" class="block text-gray-800 hover:text-blue-800">Carte graphique</a>
            </li>
            <hr>
            <li><a href="#" class="block text-gray-800 hover:text-blue-800">RAM</a></li>
            <hr>
            <li><a href="#" class="block text-gray-800 hover:text-blue-800">Refroidissement</a></li>
            <hr>
            <li><a href="#" class="block text-gray-800 hover:text-blue-800">Boîtier</a></li>
            <hr>
            <li><a href="APropos.html" class="block text-gray-800 font-semibold hover:text-blue-800">A propos</a></li>
        </ul>
    </div>
    <!-- EndOfNavbar -->


    <!-- Main Content -->
    <main id="mainflex">
        <section class="rightSide">
            <div class="setPrice">
                <div>
                    <label for="priceSlider">Prix :</label>
                    <button id="closeFi" style="float: right; background-color: grey; border-radius: 50%;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                          </svg>                          
                    </button>
                </div>

                <input id="priceSlider" name="priceSlider" type="range">
                <p><span>0</span> MAD ~ <span id="maxprice"> 5000</span> MAD</p>
            </div>
            <select id="part-type" name="part-type">
                <option value="">Type</option>
                <option value="storage">Stockage</option>
                <option value="cpu">Processeur</option>
                <option value="gpu">Carte Graphique</option>
                <option value="case">Case</option>
                <option value="ram">RAM</option>
                <option value="motherboard">Carte Mére</option>
                <option value="psu">Alimentation</option>
                <option value="cooler">Refroidissement</option>
            </select>
  
            <!-- CPU Filter -->
            <select id="cpu-brand" name="cpu-brand">
                <option value="">CPU Brand</option>
                <option value="AMD">AMD</option>
                <option value="Intel">Intel</option>
            </select>
  
            <select id="cpu-core-count" name="cpu-core-count">
                <option value="">CPU Core Count</option>
                <option value="2">2</option>
                <option value="4">4</option>
                <option value="6">6</option>
                <option value="8">8</option>
                <option value="12">12</option>
                <option value="16">16</option>
            </select>
  
            <select id="cpu-core-clock" name="cpu-core-clock">
                <option value="">CPU Core Clock (GHz)</option>
                <option value="2.5">2.5</option>
                <option value="3.0">3.0</option>
                <option value="3.5">3.5</option>
                <option value="4.0">4.0</option>
            </select>
  
            <!-- GPU Filter -->
            <select id="gpu-brand" name="gpu-brand">
                <option value="">GPU Brand</option>
                <option value="Nvidia">Nvidia</option>
                <option value="AMD">AMD</option>
                <option value="Intel ARC">Intel ARC</option>
            </select>
  
            <select id="gpu-memory" name="gpu-memory">
                <option value="">GPU Memory (GB)</option>
                <option value="4">4</option>
                <option value="6">6</option>
                <option value="8">8</option>
                <option value="10">10</option>
                <option value="12">12</option>
            </select>
  
            <select id="gpu-core-clock" name="gpu-core-clock">
                <option value="">GPU Core Clock (MHz)</option>
                <option value="1200">1200</option>
                <option value="1500">1500</option>
                <option value="1800">1800</option>
                <option value="2100">2100</option>
            </select>
  
            <!-- PSU Filter -->
            <select id="psu-efficiency" name="psu-efficiency">
                <option value="">PSU Efficiency</option>
                <option value="80+ Gold">80+ Gold</option>
                <option value="80+ Platinum">80+ Platinum</option>
                <option value="80+ Bronze">80+ Bronze</option>
                <option value="80+ White">80+ White</option>
            </select>
  
            <select id="psu-wattage" name="psu-wattage">
                <option value="">PSU Wattage (W)</option>
                <option value="400">400</option>
                <option value="500">500</option>
                <option value="600">600</option>
                <option value="750">750</option>
                <option value="1000">1000</option>
            </select>
  
            <!-- Motherboard Filter -->
            <select id="motherboard-socket" name="motherboard-socket">
                <option value="">Motherboard Socket</option>
                <option value="LGA1200">LGA1200</option>
                <option value="AM4">AM4</option>
                <option value="LGA1700">LGA1700</option>
                <option value="sTRX4">sTRX4</option>
            </select>
  
            <select id="motherboard-form-factor" name="motherboard-form-factor">
                <option value="">Motherboard Form Factor</option>
                <option value="ATX">ATX</option>
                <option value="MicroATX">MicroATX</option>
                <option value="MiniITX">MiniITX</option>
            </select>
  
            <!-- Case Filter -->
            <select id="case-type" name="case-type">
                <option value="">Case Type</option>
                <option value="ATX">ATX</option>
                <option value="MicroATX">MicroATX</option>
                <option value="MiniITX">MiniITX</option>
            </select>
  
            <select id="case-color" name="case-color">
                <option value="">Case Color</option>
                <option value="Black">Black</option>
                <option value="White">White</option>
                <option value="Gray">Gray</option>
            </select>
  
            <!-- RAM Filter -->
            <select id="ram-speed" name="ram-speed">
                <option value="">RAM Speed (MHz)</option>
                <option value="2400">2400</option>
                <option value="3200">3200</option>
                <option value="3600">3600</option>
                <option value="4000">4000</option>
            </select>
  
            <select id="ram-modules" name="ram-modules">
                <option value="">RAM Modules</option>
                <option value="2x8">2x8 GB</option>
                <option value="2x16">2x16 GB</option>
                <option value="4x8">4x8 GB</option>
            </select>
  
            <!-- Cooling Filter -->
            <select id="cooling-rpm" name="cooling-rpm">
                <option value="">Cooling Fan RPM</option>
                <option value="1000">1000rpm</option>
                <option value="1500">1500rpm</option>
                <option value="2000">2000rpm</option>
            </select>
  
            <select id="cooling-noise-level" name="cooling-noise-level">
                <option value="">Cooling Noise Level (dB)</option>
                <option value="20">20db</option>
                <option value="25">25db</option>
                <option value="30">30db</option>
            </select>
  
            <!-- Storage Filter -->
            <select id="storage-capacity" name="storage-capacity">
                <option value="">Storage Capacity (GB)</option>
                <option value="200">256GB</option>
                <option value="500">512GB</option>
                <option value="1000">1024GB</option>
                <option value="2000">2048GB</option>
            </select>
  
            <select id="storage-type" name="storage-type">
                <option value="">Storage Type</option>
                <option value="SSD">SSD</option>
                <option value="HDD">HDD</option>
            </select>
        </section>
        <section class="leftSide">
            <button id="filterBtn" class="bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded">
                Filter
              </button>
            <div class="sortOptions">
                    <p id="affhi">
                        Afficher: 
                        <span class="items-per-page" data-items="9">9</span>/
                        <span class="items-per-page" data-items="12">12</span>/
                        <span class="items-per-page" data-items="16">16</span>/
                        <span class="items-per-page" data-items="24">24</span>
                    </p>
  
                <svg id="listIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5">
                    <path fill-rule="evenodd" d="M6 4.75A.75.75 0 0 1 6.75 4h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 4.75ZM6 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 10Zm0 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75a.75.75 0 0 1-.75-.75ZM1.99 4.75a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1v-.01ZM1.99 15.25a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1v-.01ZM1.99 10a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1V10Z" clip-rule="evenodd" />
                  </svg>
  
                <svg id="gridIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5">
                    <path fill-rule="evenodd" d="M4.25 2A2.25 2.25 0 0 0 2 4.25v2.5A2.25 2.25 0 0 0 4.25 9h2.5A2.25 2.25 0 0 0 9 6.75v-2.5A2.25 2.25 0 0 0 6.75 2h-2.5Zm0 9A2.25 2.25 0 0 0 2 13.25v2.5A2.25 2.25 0 0 0 4.25 18h2.5A2.25 2.25 0 0 0 9 15.75v-2.5A2.25 2.25 0 0 0 6.75 11h-2.5Zm9-9A2.25 2.25 0 0 0 11 4.25v2.5A2.25 2.25 0 0 0 13.25 9h2.5A2.25 2.25 0 0 0 18 6.75v-2.5A2.25 2.25 0 0 0 15.75 2h-2.5Zm0 9A2.25 2.25 0 0 0 11 13.25v2.5A2.25 2.25 0 0 0 13.25 18h2.5A2.25 2.25 0 0 0 18 15.75v-2.5A2.25 2.25 0 0 0 15.75 11h-2.5Z" clip-rule="evenodd" />
                  </svg>
                <select id="sort-select">
                    <option value="">Tri .....................</option>
                    <option value="price-desc">Tri par tarif décroissant</option>
                    <option value="price-asc">Tri par tarif croissant</option>
            </select>                         
            </div>
            <div class="catalogItems">
  
  
            </div>
            <div class="pagination text-center mt-5">
                <!-- Page number buttons will be dynamically inserted here -->
            </div>
  
        </section>
    </main>


    <!-- Footer -->
    <footer class="bg-white py-8 pt-16 border-t">
        <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 text-center lg:text-left text-white">
            <!-- About Section -->
            <div class="w-full">
                <img src="../assets/media/Logo.png" alt="Logo" class="w-56 h-auto mx-auto sm:mx-0">
                <p class="text-gray-700 mt-2 text-sm px-8 lg:px-0">
                    GearBox PC est une boutique en ligne spécialisée dans les composants PC de qualité, offrant tout le nécessaire pour assembler, upgrader et optimiser votre ordinateur, avec des produits fiables et performants à prix compétitifs.
                </p>
                <div class="flex justify-center lg:justify-start space-x-4 mt-4 text-xl">
                    <a href="#">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 50 50">
                            <path d="M41,4H9C6.24,4,4,6.24,4,9v32c0,2.76,2.24,5,5,5h32c2.76,0,5-2.24,5-5V9C46,6.24,43.76,4,41,4z M17,20v19h-6V20H17z M11,14.47c0-1.4,1.2-2.47,3-2.47s2.93,1.07,3,2.47c0,1.4-1.12,2.53-3,2.53C12.2,17,11,15.87,11,14.47z M39,39h-6c0,0,0-9.26,0-10 c0-2-1-4-3.5-4.04h-0.08C27,24.96,26,27.02,26,29c0,0.91,0,10,0,10h-6V20h6v2.56c0,0,1.93-2.56,5.81-2.56 c3.97,0,7.19,2.73,7.19,8.26V39z"></path>
                        </svg>
                    </a>
                    <a href="#">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 50 50">
                            <path d="M25,3C12.85,3,3,12.85,3,25c0,11.03,8.125,20.137,18.712,21.728V30.831h-5.443v-5.783h5.443v-3.848 c0-6.371,3.104-9.168,8.399-9.168c2.536,0,3.877,0.188,4.512,0.274v5.048h-3.612c-2.248,0-3.033,2.131-3.033,4.533v3.161h6.588 l-0.894,5.783h-5.694v15.944C38.716,45.318,47,36.137,47,25C47,12.85,37.15,3,25,3z"></path>
                        </svg>
                    </a>
                    <a href="#">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 50 50">
                            <path d="M 11 4 C 7.134 4 4 7.134 4 11 L 4 39 C 4 42.866 7.134 46 11 46 L 39 46 C 42.866 46 46 42.866 46 39 L 46 11 C 46 7.134 42.866 4 39 4 L 11 4 z M 13.085938 13 L 21.023438 13 L 26.660156 21.009766 L 33.5 13 L 36 13 L 27.789062 22.613281 L 37.914062 37 L 29.978516 37 L 23.4375 27.707031 L 15.5 37 L 13 37 L 22.308594 26.103516 L 13.085938 13 z M 16.914062 15 L 31.021484 35 L 34.085938 35 L 19.978516 15 L 16.914062 15 z"></path>
                        </svg>
                    </a>              
                </div>
            </div>            

            <!-- Support Section -->
            <div class="space-y-3 text-sm w-full lg:pl-16">
                <h3 class="font-semibold text-lg text-black">Support client</h3>
                <a href="#" class="block text-gray-700">Retours et garantie</a>
                <a href="#" class="block text-gray-700">Paiements</a>
                <a href="#" class="block text-gray-700">Livraison</a>
                <a href="#" class="block text-gray-700">Termes de service</a>
                <a href="#" class="block text-gray-700">Politique de confidentialité</a>
            </div>

            <!-- Contact Section -->
            <div class="w-full">
                <h3 class="font-semibold text-lg text-black">Besoin d'aide ?</h3>
                <p class="text-gray-700 mt-2 text-sm px-8 lg:px-0">
                    Notre équipe est là pour vous aider avec toutes vos questions concernant nos produits, services, et commandes. N'hésitez pas à nous contacter pour un support rapide et personnalisé.
                </p>                      
                <button class="bg-black text-white py-2 px-6 rounded-md mt-4">Contactez-nous</button>
            </div>
        </div>
        <br>
        <hr class="h-px my-8 bg-gray-300 border-0">
        <div class="text-center text-gray-700 mt-8">&copy; 2024 - Designed by <strong>CloudBlast</strong></div>
    </footer>
    <!-- EndOfFooter -->

    <script>

        let itemsPerPage = 9;
        let currentPage = 1;
        let catalogData = [];
        let filteredData = [];  
        let totalPages = 1;



        document.querySelectorAll("#affhi .items-per-page").forEach(span => {
            span.addEventListener('click', function() {
                const selectedItemsPerPage = parseInt(span.getAttribute("data-items"));
                itemsPerPage = selectedItemsPerPage;
                document.querySelectorAll("#affhi .items-per-page").forEach(item => item.classList.remove('font-bold'));
                span.classList.add('font-bold');
                renderItems('grid'); 
            });
        });

        async function theData() {
            try{
            const response = await fetch('https://oussamabenoujja.github.io/dataBase/data.json');  
            const data = await response.json();
            catalogData = data;
            return catalogData;  
            } catch (error) {
                console.error("Error loading catalog data:", error);
            }
        }

        console.log(theData());

        async function loadCatalogData() {
            try {
                const response = await fetch('https://oussamabenoujja.github.io/dataBase/data.json');  
                const data = await response.json();
                catalogData = data;
                filteredData = catalogData;  

                updatePagination();  
                renderPage();        
            } catch (error) {
                console.error("Error loading catalog data:", error);
            }
        }


        document.addEventListener('DOMContentLoaded', function () {
            const urlParams = new URLSearchParams(window.location.search);
            const category = urlParams.get('category'); 
            
            if (category) {
                filteredData = catalogData.filter(item => item.part_type === category); 
                currentPage = 1; 
                updatePagination();
                renderPage();
            } else {
                loadCatalogData(); 
            }
        });


        document.addEventListener('DOMContentLoaded', function () {
            const pageButtons = document.querySelectorAll('.pagination .page-btn');

            pageButtons.forEach(button => {
                button.addEventListener('click', function () {
                    pageButtons.forEach(btn => btn.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
        });



        async function renderPage() {
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const items = filteredData.slice(start, end);  
            const catalogItemsContainer = document.querySelector('.catalogItems');
            catalogItemsContainer.innerHTML = '';

            for (const item of items) {
                const imageUrl = item.image_urls[0]; 

                const itemHTML = `
                    <div class="item_cards w-full max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 item-card" id="${item.part_type}">
                        <a href="#">
                            <img class="p-8 rounded-t-lg" src="${imageUrl}" alt="product image" />
                        </a>
                        <div class="atSec px-5 ">
                            <a id="itemTitle${item.id}" href="#">
                                <h5 class="text-xl font-semibold tracking-tight text-gray-900 dark:text-white" id="item${item.id}">${item.name}</h5>
                            </a>
                            <div class="flex items-center justify-between">
                            <span class="text-3xl font-bold text-gray-900 dark:text-white">${(item.price*9).toFixed(2)} MAD</span>
                            <a id="cartButton${item.id}" href="#" class="rounded-lg bg-blue-700 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                                </svg>
                            </a>
                            </div>
                        </div>
                    </div>`;

                catalogItemsContainer.insertAdjacentHTML('beforeend', itemHTML);
                document.getElementById(`item${item.id}`).addEventListener('click', function() {
                    const data = { id: item.id};
                    const queryString = new URLSearchParams(data).toString();
                    window.location.href = `Details.html?${queryString}`;
                });

                document.getElementById(`item${item.id}`).addEventListener('click', function() {
                    const data = { id: item.id };
                    const queryString = new URLSearchParams(data).toString();
                    window.location.href = `Details.html?${queryString}`;
                });

                document.getElementById(`cartButton${item.id}`).addEventListener('click', function() {
                    const data = { id: item.id };
                    const queryString = new URLSearchParams(data).toString();
                    window.location.href = `Details.html?${queryString}`;
                });
            } 
        }


        document.querySelector('#sort-select').addEventListener('change', function () {
            const sortOption = this.value;
            sortCatalog(sortOption);
        });


        function sortCatalog(sortOption) {
            if (sortOption === 'price-asc') {
                // Sort by price in ascending order
                filteredData.sort((a, b) => (a.price * 9) - (b.price * 9));
            } else if (sortOption === 'price-desc') {
                // Sort by price in descending order
                filteredData.sort((a, b) => (b.price * 9) - (a.price * 9));
            }

            // Re-render items with the current view type
            currentPage = 1;  // Reset to first page after sorting
            renderItems(whichState);
        }


        function renderPagination() {
            const paginationContainer = document.querySelector('.pagination');
            paginationContainer.innerHTML = '';  

            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.classList.add('page-btn', 'px-3', 'py-2', 'mx-1', 'bg-blue-500', 'text-white', 'rounded');
                pageButton.innerText = i;
                pageButton.addEventListener('click', () => {
                    currentPage = i;  
                    renderPage();  
                });
                if (i === currentPage) {
                    pageButton.classList.add('bg-blue-900');  // Highlight the active page
                }
                paginationContainer.appendChild(pageButton);
            }
        }

        function filterCatalog() {
            const partType = document.querySelector('#part-type').value;

            
            filteredData = partType === "" ? catalogData : catalogData.filter(item => item.part_type === partType);

            
            currentPage = 1;

            
            updatePagination();
            renderItems(whichState);
        }

        document.querySelector('#part-type').addEventListener('change', filterCatalog);

        document.addEventListener('DOMContentLoaded', function() {    
            filterPrice();

        });

        function filterCatalogByCapacityAndType() {
            const capacitySelect = document.querySelector('#storage-capacity');
            const typeSelect = document.querySelector('#storage-type');

            if (!capacitySelect || !typeSelect) return;

                                                                                                                                        
            capacitySelect.addEventListener('change', applyFilters);
            typeSelect.addEventListener('change', applyFilters);

            function applyFilters() {
                const selectedCapacity = parseInt(capacitySelect.value);
                const selectedType = typeSelect.value;

                
                filteredData = catalogData.filter(item => {
                    const matchesCapacity = isNaN(selectedCapacity) || item.Capacity >= selectedCapacity;
                    const matchesType = !selectedType || item["Storage Type"] === selectedType;
                    return matchesCapacity && matchesType;
                });

            
                currentPage = 1;
                updatePagination();
                renderPage();
            }
        }

        filterCatalogByCapacityAndType();

        function filterPrice() {
            const priceSlider = document.getElementById('priceSlider');
            priceSlider.addEventListener('change', () => {
                const maxPrice = (5000 / 100) * priceSlider.value;
                document.getElementById('maxprice').innerText = maxPrice;
                
                filteredData = catalogData.filter(item => (item.price * 9) <= maxPrice);

                
                currentPage = 1;
                updatePagination();
                renderPage();
            });
        }

        function updatePagination() {
            totalPages = Math.ceil(filteredData.length / itemsPerPage);  
            renderPagination();  
        }

        document.addEventListener('DOMContentLoaded', loadCatalogData);
        document.querySelector('#part-type').addEventListener('change', filterCatalog);

        document.addEventListener('DOMContentLoaded', function() {
            const partTypeSelect = document.querySelector('#part-type');

            const storageSelects = document.querySelectorAll('#storage-capacity, #storage-type');
            const cpuSelects = document.querySelectorAll('#cpu-brand, #cpu-core-count, #cpu-core-clock');
            const gpuSelects = document.querySelectorAll('#gpu-brand, #gpu-memory, #gpu-core-clock');
            const psuSelects = document.querySelectorAll('#psu-efficiency, #psu-wattage');
            const motherboardSelects = document.querySelectorAll('#motherboard-socket, #motherboard-form-factor');
            const caseSelects = document.querySelectorAll('#case-type, #case-color');
            const ramSelects = document.querySelectorAll('#ram-speed, #ram-modules');
            const coolerSelects = document.querySelectorAll('#cooling-rpm, #cooling-noise-level');

            // Initially hide all selects
            storageSelects.forEach(select => select.style.display = 'none');
            cpuSelects.forEach(select => select.style.display = 'none');
            gpuSelects.forEach(select => select.style.display = 'none');
            psuSelects.forEach(select => select.style.display = 'none');
            motherboardSelects.forEach(select => select.style.display = 'none');
            caseSelects.forEach(select => select.style.display = 'none');
            ramSelects.forEach(select => select.style.display = 'none');
            coolerSelects.forEach(select => select.style.display = 'none');

            
            partTypeSelect.addEventListener('change', function() {
                
                storageSelects.forEach(select => select.style.display = 'none');
                cpuSelects.forEach(select => select.style.display = 'none');
                gpuSelects.forEach(select => select.style.display = 'none');
                psuSelects.forEach(select => select.style.display = 'none');
                motherboardSelects.forEach(select => select.style.display = 'none');
                caseSelects.forEach(select => select.style.display = 'none');
                ramSelects.forEach(select => select.style.display = 'none');
                coolerSelects.forEach(select => select.style.display = 'none');

                
                if (partTypeSelect.value === 'storage') {
                    storageSelects.forEach(select => select.style.display = 'block');
                } else if (partTypeSelect.value === 'cpu') {
                    cpuSelects.forEach(select => select.style.display = 'block');
                } else if (partTypeSelect.value === 'gpu') {
                    gpuSelects.forEach(select => select.style.display = 'block');
                } else if (partTypeSelect.value === 'psu') {
                    psuSelects.forEach(select => select.style.display = 'block');
                } else if (partTypeSelect.value === 'motherboard') {
                    motherboardSelects.forEach(select => select.style.display = 'block');
                } else if (partTypeSelect.value === 'case') {
                    caseSelects.forEach(select => select.style.display = 'block');
                } else if (partTypeSelect.value === 'ram') {
                    ramSelects.forEach(select => select.style.display = 'block');
                } else if (partTypeSelect.value === 'cooler') {
                    coolerSelects.forEach(select => select.style.display = 'block');
                }
            });
        });

        let iconbtnList = document.getElementById('listIcon');
        let iconbtnGrid = document.getElementById('gridIcon');
        let whichState = 'grid';

        function getItemHTML(item, viewType) {
            if (viewType === 'grid') {
            
                return `
                    <div class="item_cards w-full max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 item-card">
                        <a href="#">
                            <img class="p-8 rounded-t-lg" src="${item.image_urls[0]}" alt="product image" />
                        </a>
                        <div class="px-5 pb-5 text-center">
                            <a href="#">
                                <h5 class="text-xl font-semibold tracking-tight text-gray-900 dark:text-white" id="item${item.id}">${item.name}</h5>
                            </a>
                            <div class="flex items-center justify-between">
                            <span class="text-3xl font-bold text-gray-900 dark:text-white">${(item.price*9).toFixed(2)} MAD</span>
                            <a id="cartButton${item.id}" href="#" class="rounded-lg bg-blue-700 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                                </svg>
                            </a>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                return `
                    <div class="item_cards w-1000px bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 item-card flex flex-row items-center p-4" style="height: 200px;">
                        <a href="#" class="listImage">
                            <img class="rounded-lg" src="${item.image_urls[0]}" alt="product image" style="width: 100px; height: auto;" />
                        </a>
                        <div class="thisinnerOut ml-4">
                            <a href="#">
                                <h5 class="text-xl font-semibold tracking-tight text-gray-900 dark:text-white" id="item${item.id}">${item.name}</h5>
                            </a>
                            <div class="thisinnerItem flex items-center justify-between">
                            <span class="text-xl font-bold text-gray-900 dark:text-white">${(item.price*9).toFixed(2)} MAD</span>
                            <a id="cartButton${item.id}" href="#" class="rounded-lg bg-blue-700 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                                </svg>
                            </a>
                            </div>
                            </div>
                    </div>
                `;
            }
        }

        function renderItems(viewType) {
            const catalogItemsContainer = document.querySelector('.catalogItems');
            catalogItemsContainer.innerHTML = '';

            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const itemsToDisplay = filteredData.slice(start, end);

            if (viewType === 'list') {
                catalogItemsContainer.style.display = 'flex';
                catalogItemsContainer.style.flexDirection = 'column';
                catalogItemsContainer.style.gap = '10px';  
            } else {
                catalogItemsContainer.style.display = 'grid';
                catalogItemsContainer.style.gridTemplateColumns = 'repeat(3, 1fr)';  
                catalogItemsContainer.style.gap = '20px';  
            }

            itemsToDisplay.forEach(item => {
                console.log(item);  
                catalogItemsContainer.insertAdjacentHTML('beforeend', getItemHTML(item, viewType));
            
                const itemElement = document.getElementById(`item${item.id}`);
                if (itemElement) {
                    itemElement.addEventListener('click', function() {
                        const data = { id: item.id };
                        const queryString = new URLSearchParams(data).toString();
                        window.location.href = `Details.html?${queryString}`;
                    });
                }
            
                const cartButton = document.getElementById(`cartButton${item.id}`);
                if (cartButton) {
                    cartButton.addEventListener('click', function(event) {
                        event.preventDefault();
                        console.log(`Item ${item.id} added to cart`);
                    });
                }
            });
            
            let cat = document.querySelector('.catalogItems');
            if(window.innerWidth<=800){cat.style.gridTemplateColumns = 'repeat(1, 1fr)';}
        }

        iconbtnList.addEventListener('click', function () {
            renderItems('list');
            whichState = 'list';
        });

        iconbtnGrid.addEventListener('click', function () {
            renderItems('grid');
            whichState = 'grid';
            let cat = document.querySelector('.catalogItems');
            if(window.innerWidth<=800){cat.style.gridTemplateColumns = 'repeat(1, 1fr)';}
        });

        document.addEventListener('DOMContentLoaded', function () {
            renderItems('grid');
            renderPagination();
            let cat = document.querySelector('.catalogItems');
            if(window.innerWidth<=800){cat.style.gridTemplateColumns = 'repeat(1, 1fr)';}  // Ensure pagination buttons are displayed
        });

        function renderPagination() {
            const paginationContainer = document.querySelector('.pagination');
            paginationContainer.innerHTML = '';

            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.classList.add('page-btn', 'px-3', 'py-2', 'mx-1', 'bg-blue-500', 'text-white', 'rounded');
                pageButton.innerText = i;
                pageButton.addEventListener('click', () => {
                    currentPage = i;
                    renderItems(whichState);  
                });
                if (i === currentPage) {
                    pageButton.classList.add('bg-blue-900');   
                }
                paginationContainer.appendChild(pageButton);
            }
        }

        document.getElementById('searchBar').addEventListener('input', function () {
            const searchQuery = this.value.toLowerCase();
            filteredData = catalogData.filter(item => item.name.toLowerCase().includes(searchQuery));

        
            currentPage = 1;
            
        
            updatePagination();
            renderPage();
            let cat = document.querySelector('.catalogItems');
            if(window.innerWidth<=800){cat.style.gridTemplateColumns = 'repeat(1, 1fr)';}
        });

        function updatePagination() {
            // Calculate total pages based on filtered data length
            totalPages = Math.ceil(filteredData.length / itemsPerPage);
            renderPagination();
            let cat = document.querySelector('.catalogItems');
            if(window.innerWidth<=800){cat.style.gridTemplateColumns = 'repeat(1, 1fr)';}
        }


        function applyFilters() {
            
            const cpuBrand = document.querySelector('#cpu-brand').value;
            const cpuCoreCount = parseInt(document.querySelector('#cpu-core-count').value);
            const cpuCoreClock = parseFloat(document.querySelector('#cpu-core-clock').value);
            const gpuBrand = document.querySelector('#gpu-brand').value;
            const gpuMemory = parseInt(document.querySelector('#gpu-memory').value);
            const gpuCoreClock = parseInt(document.querySelector('#gpu-core-clock').value);
            const psuEfficiency = document.querySelector('#psu-efficiency').value;
            const psuWattage = parseInt(document.querySelector('#psu-wattage').value);
            const motherboardSocket = document.querySelector('#motherboard-socket').value;
            const motherboardFormFactor = document.querySelector('#motherboard-form-factor').value;
            const caseType = document.querySelector('#case-type').value;
            const caseColor = document.querySelector('#case-color').value;
            const ramSpeed = parseInt(document.querySelector('#ram-speed').value);
            const ramModules = document.querySelector('#ram-modules').value;
            const coolingRpm = parseInt(document.querySelector('#cooling-rpm').value);
            const coolingNoiseLevel = parseInt(document.querySelector('#cooling-noise-level').value);
            
            filteredData = catalogData.filter(item => {
                const matchesCpuBrand = !cpuBrand || item["Model"]?.includes(cpuBrand);
                const matchesCpuCoreCount = isNaN(cpuCoreCount) || item["Cores"] === cpuCoreCount;
                const matchesCpuCoreClock = isNaN(cpuCoreClock) || item["Base Clock"] >= cpuCoreClock;

                const matchesGpuBrand = !gpuBrand || item["GPU Model"]?.includes(gpuBrand);
                const matchesGpuMemory = isNaN(gpuMemory) || item["Memory"] === gpuMemory;
                const matchesGpuCoreClock = isNaN(gpuCoreClock) || item["Core Clock"] >= gpuCoreClock;

                const matchesPsuEfficiency = !psuEfficiency || item["Efficiency"] === psuEfficiency;
                const matchesPsuWattage = isNaN(psuWattage) || item["Wattage"] >= psuWattage;

                const matchesMotherboardSocket = !motherboardSocket || item["Socket"] === motherboardSocket;
                const matchesMotherboardFormFactor = !motherboardFormFactor || item["Form Factor"] === motherboardFormFactor;

                const matchesCaseType = !caseType || item["Form Factor"] === caseType;
                const matchesCaseColor = !caseColor || item["Color"] === caseColor;

                const matchesRamSpeed = isNaN(ramSpeed) || item["Speed"] >= ramSpeed;
                const matchesRamModules = !ramModules || item["Capacity"] === parseInt(ramModules.split('x')[1]);

                const matchesCoolingRpm = isNaN(coolingRpm) || parseInt(item["Max Fan Speed"]) >= coolingRpm;
                const matchesCoolingNoiseLevel = isNaN(coolingNoiseLevel) || parseInt(item["Noise Level"]) <= coolingNoiseLevel;

                return matchesCpuBrand && matchesCpuCoreCount && matchesCpuCoreClock &&
                    matchesGpuBrand && matchesGpuMemory && matchesGpuCoreClock &&
                    matchesPsuEfficiency && matchesPsuWattage &&
                    matchesMotherboardSocket && matchesMotherboardFormFactor &&
                    matchesCaseType && matchesCaseColor &&
                    matchesRamSpeed && matchesRamModules &&
                    matchesCoolingRpm && matchesCoolingNoiseLevel;
            });

        
            currentPage = 1;
            updatePagination();
            renderPage();
            let cat = document.querySelector('.catalogItems');
            if(window.innerWidth<=800){cat.style.gridTemplateColumns = 'repeat(1, 1fr)';}
        }




        document.querySelectorAll('#cpu-brand, #cpu-core-count, #cpu-core-clock, #gpu-brand, #gpu-memory, #gpu-core-clock, #psu-efficiency, #psu-wattage, #motherboard-socket, #motherboard-form-factor, #case-type, #case-color, #ram-speed, #ram-modules, #cooling-rpm, #cooling-noise-level')
            .forEach(select => select.addEventListener('change', applyFilters));
        document.addEventListener('DOMContentLoaded', applyFilters);

        window.addEventListener('load',function(){
            document.querySelector('#filterBtn').style.display = 'none';
            let filterPanel = document.querySelector('.rightSide');
            let fitBtn = document.querySelector('#filterBtn');
            let cat = document.querySelector('.catalogItems');
            let aff = document.querySelector('#affhi');
            let margin = document.querySelector('#mainflex');
            if(window.innerWidth<=800){
                console.log(window.innerWidth);
                filterPanel.style.display = 'none';
                fitBtn.style.display = 'block';
                cat.style.gridTemplateColumns = 'repeat(1, 1fr)';
                cat.style.justifyContent = "center";
                aff.style.display = 'none';
                margin.style.marginLeft= '-30px';
                margin.style.marginRight= '-30px';
            }else{
                aff.style.display = 'block';
                closeFi.style.display = 'none';
                fitBtn.style.display = 'none';
                filterPanel.style.display = 'block';
                cat.style.gridTemplateColumns = 'repeat(3, 1fr)';
                filterPanel.style.position = 'relative';
                filterPanel.style.width = '30%';
                margin.style.marginLeft= '50px';
                margin.style.marginRight= '50px';
                
            }
        })

        let closeFi = document.getElementById('closeFi');

        document.querySelector('#filterBtn').addEventListener('click',function(){
            let filterPanel = document.querySelector('.rightSide');
            filterPanel.style.position = 'fixed';
            filterPanel.style.display = 'block';
            filterPanel.style.width = '70%';
            closeFi.style.display = 'block';
        })

        window.addEventListener('resize', function(){
            let filterPanel = document.querySelector('.rightSide');
            let fitBtn = document.querySelector('#filterBtn');
            let cat = document.querySelector('.catalogItems');
            let aff = document.querySelector('#affhi');
            let margin = document.querySelector('#mainflex');
            if(window.innerWidth<=800){
                console.log(window.innerWidth);
                filterPanel.style.display = 'none';
                fitBtn.style.display = 'block';
                cat.style.gridTemplateColumns = 'repeat(1, 1fr)';
                cat.style.justifyContent = "center";
                aff.style.display = 'none';
                margin.style.marginLeft= '-30px';
                margin.style.marginRight= '-30px';
            }else{
                aff.style.display = 'block';
                closeFi.style.display = 'none';
                fitBtn.style.display = 'none';
                filterPanel.style.display = 'block';
                cat.style.gridTemplateColumns = 'repeat(3, 1fr)';
                filterPanel.style.position = 'relative';
                filterPanel.style.width = '30%';
                margin.style.marginLeft= '50px';
                margin.style.marginRight= '50px';
                
            }
        })

        closeFi.addEventListener('click', function(){
            let filterPanel = document.querySelector('.rightSide');
            filterPanel.style.display = 'none';
        })

    </script>

</body>
</html>